(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{469:function(t,e,l){"use strict";l.r(e);var a=l(35),s=Object(a.a)({},(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[l("h1",{attrs:{id:"general-prerequisites"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#general-prerequisites"}},[t._v("#")]),t._v(" General prerequisites")]),t._v(" "),l("p",[t._v("This section introduces some general infrastructure considerations related to DHCP, DNS, proxies\nand firewalls.")]),t._v(" "),l("h2",{attrs:{id:"dhcp-dns"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#dhcp-dns"}},[t._v("#")]),t._v(" DHCP, DNS")]),t._v(" "),l("p",[t._v("In Kubernetes, it is important that node IP addresses never change. If a node IP address changes or\nbecomes unavailable, it can break the cluster. To prevent this, consider using DHCP reservations or\nstatic IP addresses to assign permanent addresses to nodes in your admin and user clusters. Using\nDHCP reservations ensures that each node is assigned the same IP addresses after restart or lease\nrenewal.")]),t._v(" "),l("h2",{attrs:{id:"network-time-protocol"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#network-time-protocol"}},[t._v("#")]),t._v(" Network Time Protocol")]),t._v(" "),l("p",[t._v("All the VMs that are part of your GKE on-prem infrastructure must use the same Network Time\nProtocol (NTP) server.")]),t._v(" "),l("h2",{attrs:{id:"planning-your-ip-addresses"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#planning-your-ip-addresses"}},[t._v("#")]),t._v(" Planning your IP addresses")]),t._v(" "),l("p",[t._v("The example configuration in the following sections describe the deployment of Anthos on "),l("strong",[t._v("three")]),t._v(" HPE SimpliVity nodes using "),l("code",[t._v("static")]),t._v(" IP addresses.")]),t._v(" "),l("p",[t._v("The following tables give an overview of the IP addresses used in the example configuration:")]),t._v(" "),l("h3",{attrs:{id:"admin-workstation"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#admin-workstation"}},[t._v("#")]),t._v(" Admin workstation")]),t._v(" "),l("table",[l("thead",[l("tr",[l("th",{staticStyle:{"text-align":"left"}},[t._v("Role")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("Variable")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("Network")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("Sample IP")])])]),t._v(" "),l("tbody",[l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("Admin workstation")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[l("code",[t._v("gke_admin_workstation.ipAllocationMode")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Internal")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("10.15.155.200")])])])]),t._v(" "),l("h3",{attrs:{id:"f5-big-ip"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#f5-big-ip"}},[t._v("#")]),t._v(" F5 BIG-IP")]),t._v(" "),l("table",[l("thead",[l("tr",[l("th",{staticStyle:{"text-align":"left"}},[t._v("Role")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("Variable")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("Network")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("Sample IP")])])]),t._v(" "),l("tbody",[l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("F5 server")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[l("code",[t._v("f5.provider.server")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Management")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("10.15.159.244")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("F5 internal selfip")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[l("code",[t._v("f5.internal_vlan_selfip")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Internal")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("10.15.155.222")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("F5 external selfip")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[l("code",[t._v("f5.external_vlan_selfip")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("External")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("10.15.158.60")])])])]),t._v(" "),l("h3",{attrs:{id:"admin-cluster"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#admin-cluster"}},[t._v("#")]),t._v(" Admin cluster")]),t._v(" "),l("table",[l("thead",[l("tr",[l("th",{staticStyle:{"text-align":"left"}},[t._v("Role")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("Variable")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("Network")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("Sample IP")])])]),t._v(" "),l("tbody",[l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("Admin API VIP")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[l("code",[t._v("gke_cluster_config.cluster_ctrl_vip")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("External")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("10.15.158.61")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("Admin ingress VIP")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[l("code",[t._v("gke_cluster_config.cluster_ingress_vip")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("External")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("10.15.158.62")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("Admin cluster master")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[l("code",[t._v("gke_cluster_config.gkenode_net.ips[]")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Internal")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("10.15.155.111")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("Admin cluster master")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[l("code",[t._v("gke_cluster_config.gkenode_net.ips[]")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Internal")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("10.15.155.112")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("Admin cluster master")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[l("code",[t._v("gke_cluster_config.gkenode_net.ips[]")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Internal")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("10.15.155.113")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("User cluster 1 master")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[l("code",[t._v("gke_cluster_config.gkenode_net.ips[]")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Internal")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("10.15.155.114")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("User cluster 2 master")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[l("code",[t._v("gke_cluster_config.gkenode_net.ips[]")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Internal")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("10.15.155.115")])])])]),t._v(" "),l("p",[l("strong",[t._v("Note:")]),t._v(" For each user cluster, you must allow for a corresponding master node in the admin cluster.")]),t._v(" "),l("h3",{attrs:{id:"user-cluster"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#user-cluster"}},[t._v("#")]),t._v(" User cluster")]),t._v(" "),l("table",[l("thead",[l("tr",[l("th",{staticStyle:{"text-align":"left"}},[t._v("Role")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("Variable")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("Network")]),t._v(" "),l("th",{staticStyle:{"text-align":"left"}},[t._v("Sample IP")])])]),t._v(" "),l("tbody",[l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("User API VIP")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[l("code",[t._v("gke_cluster_config.cluster_ctrl_vip")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("External")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("10.15.158.63")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("User ingress VIP")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[l("code",[t._v("gke_cluster_config.cluster_ingress_vip")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("External")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("10.15.158.64")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("User cluster 1 worker")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[l("code",[t._v("gke_cluster_config.gkenode_net.ips[]")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Internal")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("10.15.155.121")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("User cluster 1 worker")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[l("code",[t._v("gke_cluster_config.gkenode_net.ips[]")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Internal")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("10.15.155.122")])]),t._v(" "),l("tr",[l("td",{staticStyle:{"text-align":"left"}},[t._v("User cluster 1 worker")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[l("code",[t._v("gke_cluster_config.gkenode_net.ips[]")])]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("Internal")]),t._v(" "),l("td",{staticStyle:{"text-align":"left"}},[t._v("10.15.155.123")])])])]),t._v(" "),l("p",[l("strong",[t._v("Note:")]),t._v(" During an upgrade, GKE on-prem creates one temporary node in the admin cluster and one temporary node in each associated user cluster. For your admin cluster and each of your user clusters, before you upgrade, you must verify that you have reserved enough IP addresses. For each cluster, you need to have reserved at least one more IP address than the number of cluster nodes.")])])}),[],!1,null,null,null);e.default=s.exports}}]);