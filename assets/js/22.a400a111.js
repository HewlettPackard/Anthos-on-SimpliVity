(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{488:function(t,e,a){"use strict";a.r(e);var l=a(45),s=Object(l.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"protecting-sensitive-information"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#protecting-sensitive-information"}},[t._v("#")]),t._v(" Protecting sensitive information")]),t._v(" "),a("p",[t._v("The Ansible "),a("code",[t._v("vault")]),t._v(" file is used to protect any sensitive variables that should not appear in clear text in your\n"),a("code",[t._v("inventory/group_vars/all/all.yml")]),t._v(" file. The vault file should be encrypted, requiring a password to be entered\nbefore it can be read or updated.")]),t._v(" "),a("p",[t._v("A sample vault file is provided named "),a("code",[t._v("inventory/group_vars/all/vault.yml.sample")]),t._v(". You can use this sample as a model for your own vault file.")]),t._v(" "),a("h2",{attrs:{id:"configuring-the-vault"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuring-the-vault"}},[t._v("#")]),t._v(" Configuring the vault")]),t._v(" "),a("p",[t._v("The following table contains the fields that should be configured in the valut:")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("Variable")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("File")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("vault_f5_root_password")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("vault.yml")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("The "),a("code",[t._v("root")]),t._v(" password for F5")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("vault_f5_admin_password")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("vault.yml")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("The "),a("code",[t._v("admin")]),t._v(" password for F5")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("vault_f5_license_key")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("vault.yml")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("The F5 license key")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("vault_vcenter_username")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("vault.yml")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("The user name for the primary vCenter")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("vault_vcenter_password")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("vault.yml")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("The password for the primary vCenter")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("vault_gkeadm_vcenter_username")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("vault.yml")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("The user name for the alternative vCenter"),a("br"),t._v("(Optional)")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("vault_gkeadm_vcenter_password")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("vault.yml")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("The password for the alternative vCenter"),a("br"),t._v("(Optional)")])])])]),t._v(" "),a("h2",{attrs:{id:"sample-vault-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sample-vault-file"}},[t._v("#")]),t._v(" Sample vault file")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("vault_f5_root_password: default\nvault_f5_admin_password: admin\nvault_f5_license_key: ABCDE-ABCDE-ABCDE-ABCDE-ABCDEFG\n\nvault_vcenter_username: Administrator@vsphere.local\nvault_vcenter_password: password\n\nvault_gkeadm_vcenter_username: Administrator@vsphere.local\nvault_gkeadm_vcenter_password: password\n")])])]),a("h2",{attrs:{id:"encrypting-the-vault"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#encrypting-the-vault"}},[t._v("#")]),t._v(" Encrypting the vault")]),t._v(" "),a("p",[t._v("To encrypt the vault you need to run the following command:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ansible-vault encrypt inventory/group_vars/all/vault.yml\n\nNew Vault password:\nConfirm New Vault password:\nEncryption successful\n")])])]),a("p",[t._v("You will be prompted for a password that will decrypt the vault when required. You can update the values in your vault by running:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ansible-vault edit inventory/group_vars/all/vault.yml\n")])])]),a("p",[t._v("In order for Ansible to be able to read the vault, you need to specify a file where the password is stored, for instance, in a file called "),a("code",[t._v(".vault_pass")]),t._v(". Once the file is created, take the following precautions to avoid illegitimate access to this file:")]),t._v(" "),a("ol",[a("li",[t._v("Change the permissions so only root can read it using "),a("code",[t._v("chmod 600 .vault_pass")])]),t._v(" "),a("li",[t._v("Add the file to your "),a("code",[t._v(".gitignore")]),t._v(" file if you are using a Git repository to manage your playbooks.")])]),t._v(" "),a("h2",{attrs:{id:"using-the-vault"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-the-vault"}},[t._v("#")]),t._v(" Using the vault")]),t._v(" "),a("p",[t._v("When you use an encrypted vault, you must specify the password file every time when you run a playbook, for example:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ansible-playbook -i hosts site.yml --vault-password-file .vault_pass\n")])])]),a("p",[t._v("Alternatively, you can be prompted for the password:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ansible-playbook -i hosts site.yml --ask-vault-pass\n")])])])])}),[],!1,null,null,null);e.default=s.exports}}]);