(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{462:function(e,t,s){"use strict";s.r(t);var n=s(45),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"accessing-your-clusters"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#accessing-your-clusters"}},[e._v("#")]),e._v(" Accessing your clusters")]),e._v(" "),s("p",[e._v("This page shows how to access the admin and user clusters.")]),e._v(" "),s("h2",{attrs:{id:"connect-to-your-admin-workstation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#connect-to-your-admin-workstation"}},[e._v("#")]),e._v(" Connect to your admin workstation")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("ssh -i /root/anthos_secrets/vsphere_workstation ubuntu@10.15.155.200\n")])])]),s("p",[e._v("The kubeconfig files that enable access to your clusters are available in the "),s("code",[e._v("kubeconfigs")]),e._v(" directory:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("ls ~/kubeconfigs\n\ngmcg-gke-usercluster-1-kubeconfig  \ninternal-cluster-kubeconfig-debug  \nkubeconfig\n")])])]),s("h2",{attrs:{id:"admin-cluster"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#admin-cluster"}},[e._v("#")]),e._v(" Admin cluster")]),e._v(" "),s("p",[e._v("The file named "),s("code",[e._v("kubeconfig")]),e._v(" enables access to the admin cluster.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("kubectl --kubeconfig ~/kubeconfigs/kubeconfig get nodes\n\nNAME              STATUS   ROLES    AGE     VERSION\ngmcg-gke-admin1   Ready    master   26h     v1.16.8-gke.6\ngmcg-gke-admin2   Ready    <none>   26h     v1.16.8-gke.6\ngmcg-gke-admin3   Ready    <none>   26h     v1.16.8-gke.6\ngmcg-gke-admin4   Ready    <none>   7h40m   v1.16.8-gke.6\n")])])]),s("h2",{attrs:{id:"user-cluster"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-cluster"}},[e._v("#")]),e._v(" User cluster")]),e._v(" "),s("p",[e._v("The names of the kubeconfig files for your user clusters are prefixed with the appropriate cluster name.\nIn the following example, the cluster name is "),s("code",[e._v("gmcg-gke-usercluster-1")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("kubectl --kubeconfig ~/kubeconfigs/gmcg-gke-usercluster-1-kubeconfig get nodes\n\nNAME                   STATUS   ROLES    AGE     VERSION\ngmcg-gke-user1-node1   Ready    <none>   7h38m   v1.16.8-gke.6\ngmcg-gke-user1-node2   Ready    <none>   7h38m   v1.16.8-gke.6\ngmcg-gke-user1-node3   Ready    <none>   7h39m   v1.16.8-gke.6\ngmcg-gke-user1-node4   Ready    <none>   7h38m   v1.16.8-gke.6\n")])])]),s("h2",{attrs:{id:"kubeconfig"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kubeconfig"}},[e._v("#")]),e._v(" KUBECONFIG")]),e._v(" "),s("p",[e._v("Instead of using the "),s("code",[e._v("--kubeconfig")]),e._v(" option, you can set an environment variable to point at the kubeconfig file you wish to use:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("export KUBECONFIG=~/kubeconfigs/gmcg-gke-usercluster-1-kubeconfig\n")])])]),s("p",[e._v("Now you can re-run the "),s("code",[e._v("kubectl get nodes")]),e._v(" command without the "),s("code",[e._v("--kubeconfig")]),e._v(" option to see the nodes in the user cluster:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("kubectl get nodes\n\nNAME                   STATUS   ROLES    AGE    VERSION\ngmcg-gke-user1-node1   Ready    <none>   7h38m   v1.16.8-gke.6\ngmcg-gke-user1-node2   Ready    <none>   7h38m   v1.16.8-gke.6\ngmcg-gke-user1-node3   Ready    <none>   7h39m   v1.16.8-gke.6\ngmcg-gke-user1-node4   Ready    <none>   7h38m   v1.16.8-gke.6\n")])])]),s("h2",{attrs:{id:"working-with-multiple-clusters"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#working-with-multiple-clusters"}},[e._v("#")]),e._v(" Working with multiple clusters")]),e._v(" "),s("p",[e._v("You can add multiple kubeconfig files to the KUBECONFIG variable:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("export KUBECONFIG=/home/ubuntu/kubeconfigs/kubeconfig:/home/ubuntu/kubeconfigs/gmcg-gke-usercluster-1-kubeconfig\n")])])]),s("p",[e._v("Use the "),s("code",[e._v("kubectl config view")]),e._v(" command to see the contexts available:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("kubectl config view\n\napiVersion: v1\nclusters:\n- cluster:\n    certificate-authority-data: DATA+OMITTED\n    server: https://10.15.158.63:443\n  name: cluster\n- cluster:\n    certificate-authority-data: DATA+OMITTED\n    server: https://10.15.158.61:443\n  name: kubernetes\ncontexts:\n- context:\n    cluster: cluster\n    user: user\n  name: cluster\n- context:\n    cluster: kubernetes\n    user: kubernetes-admin\n  name: kubernetes-admin@kubernetes\ncurrent-context: cluster\nkind: Config\npreferences: {}\nusers:\n- name: kubernetes-admin\n  user:\n    client-certificate-data: REDACTED\n    client-key-data: REDACTED\n- name: user\n  user:\n    client-certificate-data: REDACTED\n    client-key-data: REDACTED\n")])])]),s("p",[e._v("To switch to the user cluster:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('kubectl config use-context cluster\n\nSwitched to context "cluster".\n')])])]),s("p",[e._v("Now list the nodes for the user cluster:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("kubectl get nodes\n\nNAME                   STATUS   ROLES    AGE    VERSION\ngmcg-gke-user1-node1   Ready    <none>   7h38m   v1.16.8-gke.6\ngmcg-gke-user1-node2   Ready    <none>   7h38m   v1.16.8-gke.6\ngmcg-gke-user1-node3   Ready    <none>   7h39m   v1.16.8-gke.6\ngmcg-gke-user1-node4   Ready    <none>   7h38m   v1.16.8-gke.6\n")])])]),s("p",[e._v("To switch to the admin cluster:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('kubectl config use-context kubernetes-admin@kubernetes\n\nSwitched to context "kubernetes-admin@kubernetes".\n')])])]),s("h2",{attrs:{id:"kubectx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kubectx"}},[e._v("#")]),e._v(" kubectx")]),e._v(" "),s("p",[e._v("When working with multiple clusters, it can be useful to use the "),s("code",[e._v("kubectx")]),e._v(" tool to manage access. Download the\n"),s("code",[e._v("kubectx")]),e._v(" software:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("git clone https://github.com/ahmetb/kubectx\n")])])]),s("p",[e._v("Add the location of the "),s("code",[e._v("kubectx")]),e._v(" program to your PATH variable so that you can easily use the command from any location.")]),e._v(" "),s("p",[e._v("When you use the "),s("code",[e._v("kubectx")]),e._v(" on its own, it will list the available contexts:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("kubectx\n\ncluster\nkubernetes-admin@kubernetes\n")])])]),s("p",[e._v("To switch to the user cluster (named "),s("code",[e._v("cluster")]),e._v("), add the name to the command:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('kubectx cluster\n\nSwitched to context "cluster".\n')])])]),s("p",[e._v("The "),s("code",[e._v("kubectx -")]),e._v(" command enables you to easily switch between contexts.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('$ kubectx kubernetes-admin@kubernetes\nSwitched to context "kubernetes-admin@kubernetes".\n$kubectx -\nSwitched to context "cluster".\n$ kubectx -\nSwitched to context "kubernetes-admin@kubernetes".\n')])])])])}),[],!1,null,null,null);t.default=a.exports}}]);