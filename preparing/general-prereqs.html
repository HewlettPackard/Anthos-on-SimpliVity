<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>General prerequisites | Anthos on HPE SimpliVity</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="">
    <link rel="preload" href="/Anthos-on-SimpliVity/assets/css/0.styles.b103954e.css" as="style"><link rel="preload" href="/Anthos-on-SimpliVity/assets/js/app.ffa267cd.js" as="script"><link rel="preload" href="/Anthos-on-SimpliVity/assets/js/3.3fcde905.js" as="script"><link rel="preload" href="/Anthos-on-SimpliVity/assets/js/52.58effa4e.js" as="script"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/10.18b41487.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/11.590bff8a.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/12.49570dee.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/13.635a2642.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/14.1f09bd1e.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/15.02f3a8d5.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/16.72b50a2a.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/17.0245a5cf.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/18.02037e0a.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/19.2c863126.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/20.4b9dde55.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/21.60f983de.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/22.a400a111.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/23.f7124ca4.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/24.03addd08.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/25.786210de.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/26.35babee2.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/27.909d2e2e.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/28.a4ca71a8.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/29.c0f68a7d.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/30.b2d9ee5c.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/31.08580a07.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/32.8fa0db3e.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/33.11374238.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/34.a7b16714.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/35.5200491e.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/36.f305eb66.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/37.36952908.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/38.cedfe8bb.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/39.80b51e8a.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/4.0d955b1a.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/40.38d771e4.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/41.56055ed3.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/42.4a72c1d9.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/43.4f7fee71.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/44.9b8595c7.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/45.92c10d81.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/46.83488262.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/47.9b2dbea0.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/48.67b7e6d1.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/49.7177756b.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/5.52e78aad.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/50.5bcafa05.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/51.2487cd73.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/53.7009985c.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/54.f262d980.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/55.ee4cf211.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/56.64fe3d79.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/57.2c8e4b60.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/58.54d75f7c.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/59.be438196.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/6.29840139.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/60.b2ed82cb.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/61.fd651621.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/62.27593df5.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/63.1268d89a.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/7.3f88916f.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/8.31c797c1.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/9.0a8882b2.js"><link rel="prefetch" href="/Anthos-on-SimpliVity/assets/js/vendors~docsearch.45768793.js">
    <link rel="stylesheet" href="/Anthos-on-SimpliVity/assets/css/0.styles.b103954e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Anthos-on-SimpliVity/" class="home-link router-link-active"><img src="/Anthos-on-SimpliVity/assets/images/hpe-logo-nav.jpg" alt="Anthos on HPE SimpliVity" class="logo"> <span class="site-name can-hide">Anthos on HPE SimpliVity</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Anthos-on-SimpliVity/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/Anthos-on-SimpliVity/blog/" class="nav-link">
  Blog
</a></div> <a href="https://github.com/HewlettPackard/Anthos-on-SimpliVity" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Anthos-on-SimpliVity/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/Anthos-on-SimpliVity/blog/" class="nav-link">
  Blog
</a></div> <a href="https://github.com/HewlettPackard/Anthos-on-SimpliVity" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/Anthos-on-SimpliVity/summary.html" class="sidebar-link">Executive summary</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Release Notes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution components</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Preparing the environment </span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Anthos-on-SimpliVity/preparing/general-prereqs.html" class="active sidebar-link">General prerequisites</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Anthos-on-SimpliVity/preparing/general-prereqs.html#dhcp-dns" class="sidebar-link">DHCP, DNS</a></li><li class="sidebar-sub-header"><a href="/Anthos-on-SimpliVity/preparing/general-prereqs.html#network-time-protocol" class="sidebar-link">Network Time Protocol</a></li><li class="sidebar-sub-header"><a href="/Anthos-on-SimpliVity/preparing/general-prereqs.html#planning-your-ip-addresses" class="sidebar-link">Planning your IP addresses</a></li></ul></li><li><a href="/Anthos-on-SimpliVity/preparing/simplivity-prereqs.html" class="sidebar-link">HPE SimpliVity prerequisites</a></li><li><a href="/Anthos-on-SimpliVity/preparing/f5-prereqs.html" class="sidebar-link">F5 prerequisites</a></li><li><a href="/Anthos-on-SimpliVity/preparing/anthos-prereqs.html" class="sidebar-link">Anthos prerequisites</a></li><li><a href="/Anthos-on-SimpliVity/preparing/ansible-controller.html" class="sidebar-link">Ansible controller</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Configuring the solution</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Running the playbooks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Post deployment tasks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Storage</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Service Mesh</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="general-prerequisites"><a href="#general-prerequisites" class="header-anchor">#</a> General prerequisites</h1> <p>This section introduces some general infrastructure considerations related to DHCP, DNS, proxies
and firewalls.</p> <h2 id="dhcp-dns"><a href="#dhcp-dns" class="header-anchor">#</a> DHCP, DNS</h2> <p>In Kubernetes, it is important that node IP addresses never change. If a node IP address changes or
becomes unavailable, it can break the cluster. To prevent this, consider using DHCP reservations or
static IP addresses to assign permanent addresses to nodes in your admin and user clusters. Using
DHCP reservations ensures that each node is assigned the same IP addresses after restart or lease
renewal.</p> <h2 id="network-time-protocol"><a href="#network-time-protocol" class="header-anchor">#</a> Network Time Protocol</h2> <p>All the VMs that are part of your GKE on-prem infrastructure must use the same Network Time
Protocol (NTP) server.</p> <h2 id="planning-your-ip-addresses"><a href="#planning-your-ip-addresses" class="header-anchor">#</a> Planning your IP addresses</h2> <p>The example configuration in the following sections describe the deployment of Anthos on <strong>three</strong> HPE SimpliVity nodes using <code>static</code> IP addresses.</p> <p>The following tables give an overview of the IP addresses used in the example configuration:</p> <h3 id="admin-workstation"><a href="#admin-workstation" class="header-anchor">#</a> Admin workstation</h3> <table><thead><tr><th style="text-align:left;">Role</th> <th style="text-align:left;">Variable</th> <th style="text-align:left;">Network</th> <th style="text-align:left;">Sample IP</th></tr></thead> <tbody><tr><td style="text-align:left;">Admin workstation</td> <td style="text-align:left;"><code>gke_admin_workstation.ipAllocationMode</code></td> <td style="text-align:left;">Internal</td> <td style="text-align:left;">10.15.155.200</td></tr></tbody></table> <h3 id="f5-big-ip"><a href="#f5-big-ip" class="header-anchor">#</a> F5 BIG-IP</h3> <table><thead><tr><th style="text-align:left;">Role</th> <th style="text-align:left;">Variable</th> <th style="text-align:left;">Network</th> <th style="text-align:left;">Sample IP</th></tr></thead> <tbody><tr><td style="text-align:left;">F5 server</td> <td style="text-align:left;"><code>f5.provider.server</code></td> <td style="text-align:left;">Management</td> <td style="text-align:left;">10.15.159.244</td></tr> <tr><td style="text-align:left;">F5 internal selfip</td> <td style="text-align:left;"><code>f5.internal_vlan_selfip</code></td> <td style="text-align:left;">Internal</td> <td style="text-align:left;">10.15.155.222</td></tr> <tr><td style="text-align:left;">F5 external selfip</td> <td style="text-align:left;"><code>f5.external_vlan_selfip</code></td> <td style="text-align:left;">External</td> <td style="text-align:left;">10.15.158.60</td></tr></tbody></table> <h3 id="admin-cluster"><a href="#admin-cluster" class="header-anchor">#</a> Admin cluster</h3> <table><thead><tr><th style="text-align:left;">Role</th> <th style="text-align:left;">Variable</th> <th style="text-align:left;">Network</th> <th style="text-align:left;">Sample IP</th></tr></thead> <tbody><tr><td style="text-align:left;">Admin API VIP</td> <td style="text-align:left;"><code>gke_cluster_config.cluster_ctrl_vip</code></td> <td style="text-align:left;">External</td> <td style="text-align:left;">10.15.158.61</td></tr> <tr><td style="text-align:left;">Admin ingress VIP</td> <td style="text-align:left;"><code>gke_cluster_config.cluster_ingress_vip</code></td> <td style="text-align:left;">External</td> <td style="text-align:left;">10.15.158.62</td></tr> <tr><td style="text-align:left;">Admin cluster master</td> <td style="text-align:left;"><code>gke_cluster_config.gkenode_net.ips[]</code></td> <td style="text-align:left;">Internal</td> <td style="text-align:left;">10.15.155.111</td></tr> <tr><td style="text-align:left;">Admin cluster master</td> <td style="text-align:left;"><code>gke_cluster_config.gkenode_net.ips[]</code></td> <td style="text-align:left;">Internal</td> <td style="text-align:left;">10.15.155.112</td></tr> <tr><td style="text-align:left;">Admin cluster master</td> <td style="text-align:left;"><code>gke_cluster_config.gkenode_net.ips[]</code></td> <td style="text-align:left;">Internal</td> <td style="text-align:left;">10.15.155.113</td></tr> <tr><td style="text-align:left;">User cluster 1 master</td> <td style="text-align:left;"><code>gke_cluster_config.gkenode_net.ips[]</code></td> <td style="text-align:left;">Internal</td> <td style="text-align:left;">10.15.155.114</td></tr> <tr><td style="text-align:left;">User cluster 2 master</td> <td style="text-align:left;"><code>gke_cluster_config.gkenode_net.ips[]</code></td> <td style="text-align:left;">Internal</td> <td style="text-align:left;">10.15.155.115</td></tr></tbody></table> <p><strong>Note:</strong> For each user cluster, you must allow for a corresponding master node in the admin cluster.</p> <h3 id="user-cluster"><a href="#user-cluster" class="header-anchor">#</a> User cluster</h3> <table><thead><tr><th style="text-align:left;">Role</th> <th style="text-align:left;">Variable</th> <th style="text-align:left;">Network</th> <th style="text-align:left;">Sample IP</th></tr></thead> <tbody><tr><td style="text-align:left;">User API VIP</td> <td style="text-align:left;"><code>gke_cluster_config.cluster_ctrl_vip</code></td> <td style="text-align:left;">External</td> <td style="text-align:left;">10.15.158.63</td></tr> <tr><td style="text-align:left;">User ingress VIP</td> <td style="text-align:left;"><code>gke_cluster_config.cluster_ingress_vip</code></td> <td style="text-align:left;">External</td> <td style="text-align:left;">10.15.158.64</td></tr> <tr><td style="text-align:left;">User cluster 1 worker</td> <td style="text-align:left;"><code>gke_cluster_config.gkenode_net.ips[]</code></td> <td style="text-align:left;">Internal</td> <td style="text-align:left;">10.15.155.121</td></tr> <tr><td style="text-align:left;">User cluster 1 worker</td> <td style="text-align:left;"><code>gke_cluster_config.gkenode_net.ips[]</code></td> <td style="text-align:left;">Internal</td> <td style="text-align:left;">10.15.155.122</td></tr> <tr><td style="text-align:left;">User cluster 1 worker</td> <td style="text-align:left;"><code>gke_cluster_config.gkenode_net.ips[]</code></td> <td style="text-align:left;">Internal</td> <td style="text-align:left;">10.15.155.123</td></tr></tbody></table> <p><strong>Note:</strong> During an upgrade, GKE on-prem creates one temporary node in the admin cluster and one temporary node in each associated user cluster. For your admin cluster and each of your user clusters, before you upgrade, you must verify that you have reserved enough IP addresses. For each cluster, you need to have reserved at least one more IP address than the number of cluster nodes.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/HewlettPackard/Anthos-on-SimpliVity/edit/docs-dev/docs-src/preparing/general-prereqs.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Anthos-on-SimpliVity/soln-components/software.html" class="prev">
        Software
      </a></span> <span class="next"><a href="/Anthos-on-SimpliVity/preparing/simplivity-prereqs.html">
        HPE SimpliVity prerequisites
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Anthos-on-SimpliVity/assets/js/app.ffa267cd.js" defer></script><script src="/Anthos-on-SimpliVity/assets/js/3.3fcde905.js" defer></script><script src="/Anthos-on-SimpliVity/assets/js/52.58effa4e.js" defer></script>
  </body>
</html>
